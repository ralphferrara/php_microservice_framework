<?php
//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
//|| Core3 :: Copyright Syhora 2016
//|| SEO
//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
//|| Class
//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

	class SEO {

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| Variables
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

		var $seotags;
		var $markers;

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| Construct
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

		function __construct() {
			$this->seotags 	 = array();
			$this->seotags['title'] 	 = Core::common('SEO_DEFAULT_TITLE');
			$this->seotags['description']= Core::common('SEO_DEFAULT_DESCRIPTION');
			$this->seotags['index'] 	 = true;
			$this->seotags['keywords']   = array();
			$this->seotags['canonical']  = Internet::domain('uri');
			$this->seotags['twitter'] 	 = array('author' => '', 'image' => '', 'description', 'id' => '');
			$this->seotags['gplus'] 	 = array('author' => '', 'image' => '', 'description', 'id' => '');
			$this->seotags['facebook']	 = array('author' => '', 'image' => '', 'description', 'id' => '');
			$this->seotags['itemtype']	 = '';
		}

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| SEO
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

		function tag($tag, $value = null) {
			if ($value === null) return Str::ifset($this->seotags, $tag, '');
			$this->seotags[$tag] = $value;
			return $value;
		}

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| Marker
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

		function marker($marker, $value) {
			$this->markers[$marker] = $value;
		}

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| Validate
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

		function validate() {
			$missing = array();
			if ($this->tag('title') == '') 			$missing[] = 'title';
			if ($this->tag('description') == '') 	$missing[] = 'description';
			if ($this->tag('image') == '') 			$missing[] = 'image';
			if ($this->tag('canonical') == '') 		$missing[] = 'canonical';
//			if (Core::site()['type'] == live) 		Core::mail()->send('support@syhora.com', 'support@syhora.com', 'SEO :: Page Missing Essential Items', Internet::domain('uri') . '<br>'. implode('<br>', $missing));
		}

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| Compile
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

		function compile() {
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Make Canonical
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			if (substr($this->tag('canonical'), 0, 4) != 'http' && substr($this->tag('canonical'), 0, 2) != '//') $this->tag('canonical', Internet::domain('domain') . $this->tag('canonical'));
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Make SSL
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			$this->tag('canonical', (substr($this->tag('canonical'), 0, 7) == 'http://') ? str_replace('http://', 'https://', $this->tag('canonical')) : $this->tag('canonical'));
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Replace any Sub Domains / Current Domains / Force WWW.
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			if (1 == 0)  {
				$url = parse_url($this->tag('canonical'));
				if ($url['host'] != 'www.'.SITE_DIR || $url['host'] != 'www.'.SITE_DIR) {
					$this->tag('canonical', str_ireplace('https://www.' . $url['host'], 'https://www.'.SITE_DIR, $this->tag('canonical')));
					$this->tag('canonical', str_ireplace('https://' . $url['host'], 'https://www.'.SITE_DIR, $this->tag('canonical')));
				}
			}
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Microdata
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			if ($this->tag('itemtype') != '') {
				$this->marker('ITEMSCOPE', 		' itemscope');
				$this->marker('ITEMTYPE', 		' itemtype="http://schema.org/'.$this->tag('itemtype').'"');
			}
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Replace any Sub Domains / Current Domains / Force WWW.
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			if ($this->tag('image') != '') {
				if (substr($this->tag('image'), 0, 4) != 'http' && substr($this->tag('image'), 0, 2) != '//') $this->tag('image', Internet::domain('domain') . $this->tag('image'));
				$this->tag('image', (substr($this->tag('image'), 0, 2) == '//') ? 'https:' . $this->tag('image') : $this->tag('image'));
				$this->tag('image', (substr($this->tag('image'), 0, 7) == 'http://') ? str_replace('http://', 'https://', $this->tag('image')) : $this->tag('image'));
			}
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Add Markers
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			$this->marker('SEOMETATITLE',				HTML::toPlain($this->tag('title'), 70));
			$this->marker('SEOMETADESCRIPTION155',		HTML::toPlain($this->tag('description'), 155));
			$this->marker('SEOMETADESCRIPTION200',		HTML::toPlain($this->tag('description'), 200));
			$this->marker('SEOMETAKEYWORDS',			implode(',', $this->tag('keywords')));
			$this->marker('SEOMETAROBOTS',				($this->tag('index') !== false) ? 'index, follow' : 'noindex, nofollow');
			$this->marker('SEOMETAIMAGE',				$this->tag('image'));
			$this->marker('SEOMETACANONICAL',			$this->tag('canonical'));
			/*
				  "name" : "{{SEOMETACOMPANYNAME}}",
				  "url" : "{{SEOMETADOMAIN}}",
				  "sameAs" : [
					"{{SEOMETAFACEBOOKLINK}}",
					"{{SEOMETATWITTERLINK}}",
					"{{SEOMETAGOOGLEPLUS}}"
				  ]
			 */
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			//|| Return HTML
			//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-= -=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
			return $this->markers;
		}

		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||
		//|| EOC
		//||=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-==-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-||

	}
